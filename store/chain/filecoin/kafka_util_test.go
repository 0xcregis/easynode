package filecoin

import (
	"testing"

	"github.com/0xcregis/easynode/store"
)

func TestGetBlockFromKafka(t *testing.T) {
	value := `
{
  "block": "{\"Miner\":\"f01154618\",\"Ticket\":{\"VRFProof\":\"s6Pb9gpxlxnqVOOlGK3I/BFogi6bgLtl+Evbbrm6NILa1IY+spFDFiKYflKAU1EKEXhVov84oqZ3Z9XTTX4o7exF/aZWHpiKZ35yQvfHNvFmW1n/wy/jz+UrQxYJhs3k\"},\"ElectionProof\":{\"WinCount\":1,\"VRFProof\":\"r4by1zjTSSutuv8asL+gRxn73XXzw433iE1x7p3KqfDMXGH46YvNXbegqXeWzjQeFu66EdBPyR5bLqv317iwuo1CUGwgGbgvz+dlq+/Oxd595jFiKyzgGHNBx3Z2DTwE\"},\"BeaconEntries\":[{\"Round\":3190372,\"Data\":\"hfoWBeu6wKYmQ+glJX9mPR6aKxgJ3TwJ7O8AqwR9vaAbnaLl/JyHWg5S3ln+3Tz5EahpqiABmRSKEPzEthDgSEHQa93ne4iwFJQvGcLLTtqbDs78WdmVvlV1u2hTyYyi\"}],\"WinPoStProof\":[{\"PoStProof\":3,\"ProofBytes\":\"mfpneQRa+0rMiOsdtY3IC5oopZl4PlVFDkNVRpxOOLoJ1ctl2sUD5qZuhamv88R2pluvV5dmMXz4Ms8STtUiGsSFJkbTgbtVChuinGLgZcg42N+vrAC0DAJeFRx3VSh1CcT/jgD7v8xN2LGuYB0Hb5OxMQoYpZ6SW6c2B8d4UzTEeV4KSM4xn9ajsow5bo/+lpdYJCgS/wr+BZ1IjlgVPrmZlGoXqO0GEFQQPwyTjeV0F7ZItZSgbvv0mvnF6seh\"}],\"Parents\":[{\"/\":\"bafy2bzacebxw72impbervqp45lxvs4wupgxenedhmaiggmx5pf75kmljbm5ma\"},{\"/\":\"bafy2bzaceaeuvnevxlki3i6qbqbuogmn243jafndttgmsn22s33rpcc6tfqt4\"},{\"/\":\"bafy2bzacedbhhnfpvhp6oppjyg7myoxk2cz7aaynw6y3b7u3pnhggyrtusjem\"},{\"/\":\"bafy2bzaced6b5nikdpc4soofcdgyls4tont7awgcocwc2zaxvv3xrqyzwmqac\"},{\"/\":\"bafy2bzacec7ibraipdnntjx6uxg3n7m3ogw7mx3glb7lf6dzwd62miomf6cc4\"},{\"/\":\"bafy2bzacedsztfnkn5lwfgywkmxrunxvlsvuig6lncukqvfvpuuo6bflk5lsk\"},{\"/\":\"bafy2bzacebodj25tahy64zggwowjvgyuwhj7andmxojegm7j2ps6l6n34lpzg\"},{\"/\":\"bafy2bzacedawmevwxg2n5fq2fk64oiw5v437jaazchnm3i5pd3wpdaiwe3bg6\"}],\"ParentWeight\":\"73069468639\",\"Height\":3094527,\"ParentStateRoot\":{\"/\":\"bafy2bzacecnnjlizpyscd43bnj5mrjvm5x3cntha4kvkntjpbw7eqpyip73p4\"},\"ParentMessageReceipts\":{\"/\":\"bafy2bzaced5ar6bmtdflmzb5kwlsbnmtkepap2bbcqqu2hd4dky2iirdfouee\"},\"Messages\":{\"/\":\"bafy2bzacecfca755foizejbl54mx7zhv7kyc7u6vtqbyx2mi5nqeqnnz54dps\"},\"BLSAggregate\":{\"Type\":2,\"Data\":\"g5+u7adTR73814YFx1GtTWF/ggCB1t4Fp6GrVbVBgkpumLKD55iRIx72apkBuuGpAtn/TDVL7ad32Yl1S9fS7Wkm2VNP6ODceEMXIzH5/31Z/TRykZcmBd8O4Viduy1x\"},\"Timestamp\":1691142210,\"BlockSig\":{\"Type\":2,\"Data\":\"oMBV3I5Ih6RhmPvy8O9mJAlzww7U6IC2wBLrLeBb7Y5jM6LGlYnKBVFlACiNcYlmEpRIEs9jWeztiX3O/vY0+8/GZEWi6vcQahfEFlA5+Ncrnqwt6/3SjkBxxnDNlWoq\"},\"ForkSignaling\":0,\"ParentBaseFee\":\"286382097\"}",
  "blockHash": "bafy2bzaceadcxfsqgadt2z6yg2kq2ozcblhxyexogxva2ph4yfhtzqsb3gnhq",
  "number": "3094527"
}
`
	block, err := GetBlockFromKafka([]byte(value))
	if err != nil {
		t.Error(err)
	}
	t.Logf("block:%+v", block)
}

func TestGetTxFromKafka(t *testing.T) {

	value := `
{
  "block": "{\"Miner\":\"f01885088\",\"Ticket\":{\"VRFProof\":\"qar+ywDvuspGO+xor7KMu7d/PafYnD/X060ZLOPb2lF9R2VC7wlhX9U52W7zOJs+AyowPMePaf64ZphEnjb8Lze6MdM8GolJyxspmdD46sCxZZPM7ekmqS9xwmAzjgVy\"},\"ElectionProof\":{\"WinCount\":1,\"VRFProof\":\"j9aZtx6ZFewQqk9JcU/gFtv3hXeoVl5FL4RnilZjAswL5k2iQ5sQdCr7Bc4KqjbZB7RL6In8r+n1PQe9Q41YkSqzoxanwVtBQbvxlTNDNtCE/LUuU/7sl3rLULragBsk\"},\"BeaconEntries\":[{\"Round\":3204590,\"Data\":\"sJ3A95NHtD+ku16Hqks1lCcNhPbZXWwlagprd+P1kCYmTczTdgEXqu/tKfsOfjeUAv80f1gyO5KPdMo/HFcgJ0Hhj35n+mAViH+XDT8ndDEkpuj4Uogmy4iviVetxiLd\"}],\"WinPoStProof\":[{\"PoStProof\":4,\"ProofBytes\":\"py5Ne8z6KQXe5f6eMxSWh25XLw6baEDpEvkjeAdiTufIP/ulniecJyIm900PqkKRrXxRkoveO5SzhPX8DLId24jaenSdJxAV2UYsXuD2HtFQT97hdhSSqcNQNcywpv8ACEwfk1ZTvr9TolyaRt+HL/JRyS30MeSIAmAyYEHmVXAVNR4zXL76PGKG7eWyYYWYjnhMcbLYIBv7gzmje1ljPwEcjVXygz4Jy/ZDHl3bK8JbVnhgvl4oxetIfAtvbDWN\"}],\"Parents\":[{\"/\":\"bafy2bzacecrpouf3zzczhr3pzrv3b5zg2j5pnbjapdp6ogme643spiihiw22q\"},{\"/\":\"bafy2bzacedqxind74syw7en5iaomebpea6yedgjq2zvza2j63qlw5wkqte6t2\"},{\"/\":\"bafy2bzacecuzs3clh4celyhfnf7dptmagdzlbbcqxywlwmoaxcpcb5utcttuu\"},{\"/\":\"bafy2bzacecigt4a6mx2bt7dmal5uy6u4hp332xhw63gtl74jkjr3lxkrrwr7a\"},{\"/\":\"bafy2bzacedgmi7y4z4l4xhscdvue4duijjjwiuknxopztwoclj42darpgevke\"}],\"ParentWeight\":\"73415083490\",\"Height\":3108745,\"ParentStateRoot\":{\"/\":\"bafy2bzaced6dyqzjnnkmfm77qpfwm3c27l6vcbf6nkuzx6mu6tsxn5y7l37hu\"},\"ParentMessageReceipts\":{\"/\":\"bafy2bzacecaldedy2zlxlzgrgce3ony6d5h3iymkqvikypp4cmrbuet5cq5jw\"},\"Messages\":{\"/\":\"bafy2bzacecpmqx2p22m5fcyhmv7ftzmu7rz3hz7yzy46yn4hn7lcsrat5stho\"},\"BLSAggregate\":{\"Type\":2,\"Data\":\"rK4MoZl6rG1FhD3BarceXqNTQ7R0v9ksMCAoAq1kJAjDm87gNfK+ZsX1j0WOwQr9B9bEOdXrXGqeRB6hw64ysB16GJ/kwcZIEcPyRPcCHecY8hP/YNdiwd4GdQK+3pAx\"},\"Timestamp\":1691568750,\"BlockSig\":{\"Type\":2,\"Data\":\"iVW33wuNRlG+vDsZrbU06IaxgQZnbfcfr1H07J3yPzVR1iDipemQnJvguZHhU0MsGaE+Ao8P3gnpIlAwT3rCU9fcmhWu9ZKa4VBdNATfp0XekyLhurf0u4s8zr8J9aPg\"},\"ForkSignaling\":0,\"ParentBaseFee\":\"24545582\"}",
  "blockHash": "bafy2bzaced2mppl2pnwthgjnpoyquvb5wcvjxnz23pi62figaf5neqsmp4sea",
  "blockNumber": "3108745",
  "hash": "bafy2bzacecdw3kec2vuyw3iyaswx3bjgcfaog65vjs575sdjv4x2uucjqqquw",
  "receipt": "{\"id\":1691572949204249000,\"blockHash\":\"bafy2bzaceaniawxpe47kt5v46t6lussw4mkum2kowrweov4fqysl53a4ph3pk\",\"logsBloom\":\"0xfeffffefef4ffffffdcffffbfdddebbffffff7fefffdf6fbfdfeffeafffffffdbfffbfefffffffbff7fffdebfeeeefffffefffdff7ffffdeeffff7ffbff7fffd7ffffffffbafbff7ffffffffffffffffffffffffbf6ffbbfffff7fffb7ffffffffdfffffffffffffffff7f7ffffffdfff7fff7ffeffffdfefffbefffefffffffffffe7bfffdffd7fff7ffffffeffdff7fdffffdffffffffbd73fffffefbffffffeffffffffffff7bfffffffffffffbfbfffffeefffffffeffdffffffff6ffffffefedfffefffef3ff7ff7ffefffffbfffbff7fafdeffffbdfffffffffff7fdffffffbffefffffdfffff77ffffffffffdfffffff9ffffbbffffffffffffffffff\",\"contractAddress\":\"\",\"transactionIndex\":\"0xcb\",\"type\":\"0x2\",\"transactionHash\":\"bafy2bzacecdw3kec2vuyw3iyaswx3bjgcfaog65vjs575sdjv4x2uucjqqquw\",\"gasUsed\":\"0x3db1324\",\"blockNumber\":\"3108745\",\"cumulativeGasUsed\":\"0x0\",\"from\":\"f01968293\",\"to\":\"f01968296\",\"effectiveGasPrice\":\"0x2334e4e\",\"logs\":[],\"createTime\":\"2023-08-09\",\"status\":\"0x1\"}",
  "tx": "{\"Version\":0,\"To\":\"f01968296\",\"From\":\"f3w63zkcy7257tcf7pxak5dw3fokhirneqwucaohgwptsk2tc53dzwvfomb6qz3yubiympd4jw7pyort3kfirq\",\"Nonce\":41812,\"Value\":\"1978218677305279646\",\"GasLimit\":106241777,\"GasFeeCap\":\"5000000000\",\"GasPremium\":\"1345343\",\"Method\":7,\"Params\":\"ghl0XFkHgK6GpkMD97Hu1BoREqUtQ2Jbg3elxOJ40XO/O1Q1VjHsjG7GsUYYFNvIOWaS2kuXoKm4D/xkkpIyaKveg3FavxC4Nlo6DodgIPOxw70AxBooPdY8P7quu120JkF125gg3AmLfiFQ781kprUZuhKNirDqjtuNb/CDRGBvzk67FRzQqWznWKbfV1g0/P4PwGROZJko/zRGs2xWiuUJNBrNOKdy2xKMTErXey9nDnHWAKGG3G2iToGH9cam3kskP962bIKoetQCSD1Pk2wyasKw2Fycq2ylL+4B1j4M0f+hYtTWasUz27J29D/S7T42eFg2wIcaGpDqgHm32csHR6o5raLOk9L5J5XmcyLlw7VDcR5cqlMHPgnKshYeTze1gJ7xUwQkYiU7rLVaxy6+XDivR1hOfle4x/hIHky/1oLOezOLgVoMmG93+kpopt5EUr6pdqZEwCfvx0GqEOd8rBmQ9JmlVOOR5VSeiF1/AE+ztTbgF6BbIRfezMpOyRNOsTKsuaMp5hJHqwIx7H+/HA1/hukQq8KvkI808X3Sbvk4kELJTRNpl22we4ZJnrt3+xyfRoMdptJqMngFUuu4yMUzpBJ7R7ZdgBTk6hvvUSVJxzChwCPFkfjLi4VZBsC9YIPNsQdYicIJeq7Gay+GfQaUCIkoARuTODvgqL8iJz4T3M1GToNdWax900Gty1cnV+12z6w37rpxjjeBiQDEUihsfeK9+Zrus40ly1vYFTxcw6X5UDo5L5NEeJw+wEMS7fnjLI3TVEdZjn/9qVqUNyJWndB8CnBKV78jH9FFxfe9fLHs+7qLpYb1aIbduxIdXPQjLKDDd+li+NLHHyJuNIFZGzZRwTtenYzZlIsrGeTxYhZ51J4l6WKVhVjGuR7J7T0mlxBsYw+nAik/G/BRRogSRubdneE6eDbqX7/ioBirOYnpIJzik/K3aWJAmKCubXZs8orTe4vkEJ/ZtJwaZjlF6ec/YHEhwALeZNiolePphZPRhawvg1Iw7guB7er35oN9qKi5Zf9fZVqKnWaCtJrJSQ3uXhUom3J3OIa0GjQr5iItyjk9k+Dmr088RvZaJpZKSqNa4LTCQ0AJdEW6kggI4MoNTFY4CkVWPKoE2IKL8JQID7+LmKztwaWc8hGZ0IzabBQYOttEMf7NXJ7CcfNVd0b/6bbR3eFFTzeAFDX8+pYEHkRVqk/GXS5IiyUrKjgM0ofa+antIs+RXBsp7b+dygJDCFthxVorqaXBPHvGuZcViwu2IIt1HJvhm8M45zK/f6fsoSBIqT1w0Vl2pcuLDqBu/YUGKGiU+nT+J549JYOkeL+BUnw6u+iqqfsPJlnZ9a1qndEE+OIX4iqdrbCJbUAYleeXHy5gMytZFm1GBTqm1MdPllklq04ywJMCaVaMFhhYPLt2OwGMtSRs5asJLfjYcpr84tzc+goY7y7irBFpygE9z51weIpxT5/uj8vLdJJhbxUVPn4ceTZ/TVIB0gI5yM+Lu2kOPx4T86UpeC7P2/uQQ5rSBlPFhpwLr5YHzabNUCdNpb4lAMntDzuJB5Sp7QaQg9Hm+lajIiyj2UOSl+lLdMq8qHEKQKeriEP8H40BpxlFjCJ+yki9+mBseim0E1qwSByJITT23Y/BNyDmdgGPgBpFyt3JeOvCAAP2MhBjKBzPCUYVkQcNuC3CjRAgqvS0wV0Q/UA60HWbDaptLo/TQ2KHq5PdukG0dpf1Uo+/lG/kvJj2D8QYTwHW9SjnwK3CdnOY8TjhoFwbfyFmGq2Ssu3I24sYdLa7/sYF4phgRSaTfcOzdGJj9C76QbkQ6zGvVJKh8ozdEgP7HSUBaYd2ALMJfIr5S16eQ6XRopLNO4T4f0AkJ3RFpFqpXrZ/8zISIIrJTaGRcnFxVEtPaWPuMtM48ZpMRbVzdP5k3Q+Uv2/6wT/HOjemUP4To9qYrFL0cAXFuHEzDiuYP8vkKL+sWQiDh6IvuJoi6q/WhIl/Nm/5oUxOGSlfP9/zbf9v1PsgWFLROz3qtYtCEqGuEFWqMjY965ocIw861JTDBosa73MiKZuwUYP3g5IMd7s1fZ+DwTcmxV1Z+CXOF3vYhRV2iAkn6AO0HUIx1/7Jibc0Tu/MMq/ASd2KeU4wPDOZYlAlE5BuNC0YBuf3rh+zRFaBLuiM7wkkFY5Cyh5pNA7uxgSWOyxh1CnML8e3Z8Q1zMF/Z+sRSdOZp9b9g4xHGLGeAkFlOo6r5pVhHYbOVraLvGP4WZHZA+dE3hJuIPImLaM0S3hp+fE3lAtZJ02aR4iYU32doE3QGofq98lazKiKN6lE1ZmBHWBsxTd8GeX50Mpl7tDDESSqF35rkxmhBcSpErwNucICwQdAXnpCX7GV7Ta+yxtTmBfGYQ0RY6UAF8RTTYcSJCaL2+1r3yeCCEe3P/VtLeYEauU1KTboxAmk1/jKKUbZ3lOo1WY6Z2wwQ2nCnhLg1VdxWAXh1t2ePCvIUMmveIJsqBPER/k+MYAi77hMZYisHggcQS0JeWCtuDkvwaBkpFhGJSvMvTGAdW1rd11uig46YcTONTUI9w\u003d\u003d\",\"CID\":{\"/\":\"bafy2bzacecdw3kec2vuyw3iyaswx3bjgcfaog65vjs575sdjv4x2uucjqqquw\"}}"
}
  `

	tx, err := GetTxFromKafka([]byte(value))
	if err != nil {
		t.Error(err)
	}
	t.Logf("tx:%+v", tx)
}

func TestGetReceiptFromKafka(t *testing.T) {

	value := `
{"id":1691572949204249000,"blockHash":"bafy2bzaceaniawxpe47kt5v46t6lussw4mkum2kowrweov4fqysl53a4ph3pk","logsBloom":"0xfeffffefef4ffffffdcffffbfdddebbffffff7fefffdf6fbfdfeffeafffffffdbfffbfefffffffbff7fffdebfeeeefffffefffdff7ffffdeeffff7ffbff7fffd7ffffffffbafbff7ffffffffffffffffffffffffbf6ffbbfffff7fffb7ffffffffdfffffffffffffffff7f7ffffffdfff7fff7ffeffffdfefffbefffefffffffffffe7bfffdffd7fff7ffffffeffdff7fdffffdffffffffbd73fffffefbffffffeffffffffffff7bfffffffffffffbfbfffffeefffffffeffdffffffff6ffffffefedfffefffef3ff7ff7ffefffffbfffbff7fafdeffffbdfffffffffff7fdffffffbffefffffdfffff77ffffffffffdfffffff9ffffbbffffffffffffffffff","contractAddress":"","transactionIndex":"0xcb","type":"0x2","transactionHash":"bafy2bzacecdw3kec2vuyw3iyaswx3bjgcfaog65vjs575sdjv4x2uucjqqquw","gasUsed":"0x3db1324","blockNumber":"3108745","cumulativeGasUsed":"0x0","from":"f01968293","to":"f01968296","effectiveGasPrice":"0x2334e4e","logs":[],"createTime":"2023-08-09","status":"0x1"}  
`
	r, err := GetReceiptFromKafka([]byte(value))
	if err != nil {
		t.Error(err)
	}
	t.Logf("receipt:%+v", r)
}

func TestGetTxType(t *testing.T) {

	value := `
{
  "block": "{\"Miner\":\"f01923554\",\"Ticket\":{\"VRFProof\":\"ggUkyvqaSQ2OA5KVIrrsfGOtU9BmiXglvIScYwhdWxbLcbyPIrYxFwoAVns4NxYPExjHHKpg4SB5EmiI5X+Z1EzwB9tyXxBeOYlVJWUyJEm5EDctx2kSAyXwVoOKzzUr\"},\"ElectionProof\":{\"WinCount\":1,\"VRFProof\":\"tiSprN2sjTriMtjbk+s3xJQZD69dTTGhLH6P8qqwMQkzwUC15QRBWSJMX0bmHI5cGZCAiUdLtAAwJ+wXA2mrMO0FvVsW1O5K2oCuWpifvsTLNumdkhZEH/EM+RZ/A2bM\"},\"BeaconEntries\":[{\"Round\":3204446,\"Data\":\"uF4Wewc4lbK7arBejR1yzUlYNGfyddR14AHrGQpt72hc+GG3j9T1HuqDqh/GRwEWAsLHv9iYT4LisC9xkN5xoxJavPyT4pIOZWXtYHZdU3qUg/71PuWj7BIdaY5/WQLE\"}],\"WinPoStProof\":[{\"PoStProof\":3,\"ProofBytes\":\"ronNfEJ/nF5S6RiWo/695z2Pt7S1XDUwK3+PjIktAsTaSf54EqsYLqs2o5Jcj8fMiGzrCwkK07/x/TAHCySc++6ODr46xmKI+98RciO4zUMRLvAmpxLgeTFR30/7gwFFC17pKEx7lJ5Jy38dRRtEb45sihGrkQ5umUhuVSRq63/hnqtjPZzZte2yo+oQPcbojA02s9QzEKaidqDGjwHqe3LhmwKPo259ByypKdswtGJEs+60P50MS/V311Zb6EMF\"}],\"Parents\":[{\"/\":\"bafy2bzaceai5zweeogh4ahtdaasowc3uhvr6xaxc2mcs6fxyis45bzyjabzo2\"},{\"/\":\"bafy2bzacebaiywrfuy4bpasiew4gltordauggs3xcra7tmvmq7pemlkhzof3c\"},{\"/\":\"bafy2bzacedrmfyo4rsquxjeanzbm2afiuecwffjoq2paffj2f4cuu7dact6qw\"},{\"/\":\"bafy2bzacedstbgyjv5dp3jup47ggladg7bas4m5roor4yqlpoxtdnd4tqqv5c\"},{\"/\":\"bafy2bzaceagmgwf6nuyehck2ajkmjqiyct6on5spns32xxysgi5y22ilipve2\"}],\"ParentWeight\":\"73411585563\",\"Height\":3108601,\"ParentStateRoot\":{\"/\":\"bafy2bzaceblpfsc7hesyswxpirfxmqozi32dmc3chdt6qflinxrda3fma3uby\"},\"ParentMessageReceipts\":{\"/\":\"bafy2bzacecoowlooznedfhagjo3pegel4udzsgz7t7poun6gwlr55tnp5h43g\"},\"Messages\":{\"/\":\"bafy2bzacea6zw3u3ezuuz2tlwb6btdtilrabpszib3h3wmqz7aicrp37xonu2\"},\"BLSAggregate\":{\"Type\":2,\"Data\":\"icUax7l8DyZjEN+3qz6yQZXcqqWWk7++pCjzHw0vBeNg90DnmMJcghTbPSKzccb8D0fVEaGolOhenq42nXTv8EcBO3hHwL85LbfJt1Z82N0yMr0S//cYO2flrAj1FR//\"},\"Timestamp\":1691564430,\"BlockSig\":{\"Type\":2,\"Data\":\"kLAbPL4TefcXAWlzrAYS55+Fc00Mw2bZvfyYjYPFgh1AijBPles9xkB5z99bpEnHDKBLADBthMSMiXMLe3Lwm1f48y45mZlniwaOZTDkLz3eBENTk6igEwMJ1GUeH8Kd\"},\"ForkSignaling\":0,\"ParentBaseFee\":\"11068584\"}",
  "blockHash": "bafy2bzaced42hrf44ybzwnm3lusainthnyq2mqhwnyvbf5a7z6p6hexkpoi6c",
  "blockNumber": "3108601",
  "hash": "bafy2bzaceb6rcsf7uhfkggapixp4oqzwzbhdikhgz3sg554lke5tw3j4yzmsa",
  "tx": "{\"Version\":0,\"To\":\"f0111584\",\"From\":\"f3q4twolpyaxozwbkp44nmqgswenu4jpgu2w3ff5twyhkx2x4uhnnt7b3luos3sjmnpogywqyct55jmfkgnuta\",\"Nonce\":109163,\"Value\":\"2061484514240465746\",\"GasLimit\":78205316,\"GasFeeCap\":\"115461089\",\"GasPremium\":\"1376173\",\"Method\":7,\"Params\":\"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\",\"CID\":{\"/\":\"bafy2bzaceb6rcsf7uhfkggapixp4oqzwzbhdikhgz3sg554lke5tw3j4yzmsa\"}}"
}
  `

	tp, err := GetTxType([]byte(value))
	if err != nil {
		t.Error(err)
	}
	t.Logf("tx.type:%v", tp)
}

func TestParseTx(t *testing.T) {

	value := `
{
  "block": "{\"Miner\":\"f01885088\",\"Ticket\":{\"VRFProof\":\"qar+ywDvuspGO+xor7KMu7d/PafYnD/X060ZLOPb2lF9R2VC7wlhX9U52W7zOJs+AyowPMePaf64ZphEnjb8Lze6MdM8GolJyxspmdD46sCxZZPM7ekmqS9xwmAzjgVy\"},\"ElectionProof\":{\"WinCount\":1,\"VRFProof\":\"j9aZtx6ZFewQqk9JcU/gFtv3hXeoVl5FL4RnilZjAswL5k2iQ5sQdCr7Bc4KqjbZB7RL6In8r+n1PQe9Q41YkSqzoxanwVtBQbvxlTNDNtCE/LUuU/7sl3rLULragBsk\"},\"BeaconEntries\":[{\"Round\":3204590,\"Data\":\"sJ3A95NHtD+ku16Hqks1lCcNhPbZXWwlagprd+P1kCYmTczTdgEXqu/tKfsOfjeUAv80f1gyO5KPdMo/HFcgJ0Hhj35n+mAViH+XDT8ndDEkpuj4Uogmy4iviVetxiLd\"}],\"WinPoStProof\":[{\"PoStProof\":4,\"ProofBytes\":\"py5Ne8z6KQXe5f6eMxSWh25XLw6baEDpEvkjeAdiTufIP/ulniecJyIm900PqkKRrXxRkoveO5SzhPX8DLId24jaenSdJxAV2UYsXuD2HtFQT97hdhSSqcNQNcywpv8ACEwfk1ZTvr9TolyaRt+HL/JRyS30MeSIAmAyYEHmVXAVNR4zXL76PGKG7eWyYYWYjnhMcbLYIBv7gzmje1ljPwEcjVXygz4Jy/ZDHl3bK8JbVnhgvl4oxetIfAtvbDWN\"}],\"Parents\":[{\"/\":\"bafy2bzacecrpouf3zzczhr3pzrv3b5zg2j5pnbjapdp6ogme643spiihiw22q\"},{\"/\":\"bafy2bzacedqxind74syw7en5iaomebpea6yedgjq2zvza2j63qlw5wkqte6t2\"},{\"/\":\"bafy2bzacecuzs3clh4celyhfnf7dptmagdzlbbcqxywlwmoaxcpcb5utcttuu\"},{\"/\":\"bafy2bzacecigt4a6mx2bt7dmal5uy6u4hp332xhw63gtl74jkjr3lxkrrwr7a\"},{\"/\":\"bafy2bzacedgmi7y4z4l4xhscdvue4duijjjwiuknxopztwoclj42darpgevke\"}],\"ParentWeight\":\"73415083490\",\"Height\":3108745,\"ParentStateRoot\":{\"/\":\"bafy2bzaced6dyqzjnnkmfm77qpfwm3c27l6vcbf6nkuzx6mu6tsxn5y7l37hu\"},\"ParentMessageReceipts\":{\"/\":\"bafy2bzacecaldedy2zlxlzgrgce3ony6d5h3iymkqvikypp4cmrbuet5cq5jw\"},\"Messages\":{\"/\":\"bafy2bzacecpmqx2p22m5fcyhmv7ftzmu7rz3hz7yzy46yn4hn7lcsrat5stho\"},\"BLSAggregate\":{\"Type\":2,\"Data\":\"rK4MoZl6rG1FhD3BarceXqNTQ7R0v9ksMCAoAq1kJAjDm87gNfK+ZsX1j0WOwQr9B9bEOdXrXGqeRB6hw64ysB16GJ/kwcZIEcPyRPcCHecY8hP/YNdiwd4GdQK+3pAx\"},\"Timestamp\":1691568750,\"BlockSig\":{\"Type\":2,\"Data\":\"iVW33wuNRlG+vDsZrbU06IaxgQZnbfcfr1H07J3yPzVR1iDipemQnJvguZHhU0MsGaE+Ao8P3gnpIlAwT3rCU9fcmhWu9ZKa4VBdNATfp0XekyLhurf0u4s8zr8J9aPg\"},\"ForkSignaling\":0,\"ParentBaseFee\":\"24545582\"}",
  "blockHash": "bafy2bzaced2mppl2pnwthgjnpoyquvb5wcvjxnz23pi62figaf5neqsmp4sea",
  "blockNumber": "3108745",
  "hash": "bafy2bzacecdw3kec2vuyw3iyaswx3bjgcfaog65vjs575sdjv4x2uucjqqquw",
  "receipt": "{\"id\":1691572949204249000,\"blockHash\":\"bafy2bzaceaniawxpe47kt5v46t6lussw4mkum2kowrweov4fqysl53a4ph3pk\",\"logsBloom\":\"0xfeffffefef4ffffffdcffffbfdddebbffffff7fefffdf6fbfdfeffeafffffffdbfffbfefffffffbff7fffdebfeeeefffffefffdff7ffffdeeffff7ffbff7fffd7ffffffffbafbff7ffffffffffffffffffffffffbf6ffbbfffff7fffb7ffffffffdfffffffffffffffff7f7ffffffdfff7fff7ffeffffdfefffbefffefffffffffffe7bfffdffd7fff7ffffffeffdff7fdffffdffffffffbd73fffffefbffffffeffffffffffff7bfffffffffffffbfbfffffeefffffffeffdffffffff6ffffffefedfffefffef3ff7ff7ffefffffbfffbff7fafdeffffbdfffffffffff7fdffffffbffefffffdfffff77ffffffffffdfffffff9ffffbbffffffffffffffffff\",\"contractAddress\":\"\",\"transactionIndex\":\"0xcb\",\"type\":\"0x2\",\"transactionHash\":\"bafy2bzacecdw3kec2vuyw3iyaswx3bjgcfaog65vjs575sdjv4x2uucjqqquw\",\"gasUsed\":\"0x3db1324\",\"blockNumber\":\"3108745\",\"cumulativeGasUsed\":\"0x0\",\"from\":\"f01968293\",\"to\":\"f01968296\",\"effectiveGasPrice\":\"0x2334e4e\",\"logs\":[],\"createTime\":\"2023-08-09\",\"status\":\"0x1\"}",
  "tx": "{\"Version\":0,\"To\":\"f01968296\",\"From\":\"f3w63zkcy7257tcf7pxak5dw3fokhirneqwucaohgwptsk2tc53dzwvfomb6qz3yubiympd4jw7pyort3kfirq\",\"Nonce\":41812,\"Value\":\"1978218677305279646\",\"GasLimit\":106241777,\"GasFeeCap\":\"5000000000\",\"GasPremium\":\"1345343\",\"Method\":7,\"Params\":\"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\u003d\u003d\",\"CID\":{\"/\":\"bafy2bzacecdw3kec2vuyw3iyaswx3bjgcfaog65vjs575sdjv4x2uucjqqquw\"}}"
}
  `

	s, err := ParseTx([]byte(value), store.PolygonTopic, 301)
	if err != nil {
		t.Error(err)
	}
	t.Logf("sub.tx:%v", s)

}

func TestCheckAddress(t *testing.T) {
	value := `
{
  "block": "{\"Miner\":\"f01885088\",\"Ticket\":{\"VRFProof\":\"qar+ywDvuspGO+xor7KMu7d/PafYnD/X060ZLOPb2lF9R2VC7wlhX9U52W7zOJs+AyowPMePaf64ZphEnjb8Lze6MdM8GolJyxspmdD46sCxZZPM7ekmqS9xwmAzjgVy\"},\"ElectionProof\":{\"WinCount\":1,\"VRFProof\":\"j9aZtx6ZFewQqk9JcU/gFtv3hXeoVl5FL4RnilZjAswL5k2iQ5sQdCr7Bc4KqjbZB7RL6In8r+n1PQe9Q41YkSqzoxanwVtBQbvxlTNDNtCE/LUuU/7sl3rLULragBsk\"},\"BeaconEntries\":[{\"Round\":3204590,\"Data\":\"sJ3A95NHtD+ku16Hqks1lCcNhPbZXWwlagprd+P1kCYmTczTdgEXqu/tKfsOfjeUAv80f1gyO5KPdMo/HFcgJ0Hhj35n+mAViH+XDT8ndDEkpuj4Uogmy4iviVetxiLd\"}],\"WinPoStProof\":[{\"PoStProof\":4,\"ProofBytes\":\"py5Ne8z6KQXe5f6eMxSWh25XLw6baEDpEvkjeAdiTufIP/ulniecJyIm900PqkKRrXxRkoveO5SzhPX8DLId24jaenSdJxAV2UYsXuD2HtFQT97hdhSSqcNQNcywpv8ACEwfk1ZTvr9TolyaRt+HL/JRyS30MeSIAmAyYEHmVXAVNR4zXL76PGKG7eWyYYWYjnhMcbLYIBv7gzmje1ljPwEcjVXygz4Jy/ZDHl3bK8JbVnhgvl4oxetIfAtvbDWN\"}],\"Parents\":[{\"/\":\"bafy2bzacecrpouf3zzczhr3pzrv3b5zg2j5pnbjapdp6ogme643spiihiw22q\"},{\"/\":\"bafy2bzacedqxind74syw7en5iaomebpea6yedgjq2zvza2j63qlw5wkqte6t2\"},{\"/\":\"bafy2bzacecuzs3clh4celyhfnf7dptmagdzlbbcqxywlwmoaxcpcb5utcttuu\"},{\"/\":\"bafy2bzacecigt4a6mx2bt7dmal5uy6u4hp332xhw63gtl74jkjr3lxkrrwr7a\"},{\"/\":\"bafy2bzacedgmi7y4z4l4xhscdvue4duijjjwiuknxopztwoclj42darpgevke\"}],\"ParentWeight\":\"73415083490\",\"Height\":3108745,\"ParentStateRoot\":{\"/\":\"bafy2bzaced6dyqzjnnkmfm77qpfwm3c27l6vcbf6nkuzx6mu6tsxn5y7l37hu\"},\"ParentMessageReceipts\":{\"/\":\"bafy2bzacecaldedy2zlxlzgrgce3ony6d5h3iymkqvikypp4cmrbuet5cq5jw\"},\"Messages\":{\"/\":\"bafy2bzacecpmqx2p22m5fcyhmv7ftzmu7rz3hz7yzy46yn4hn7lcsrat5stho\"},\"BLSAggregate\":{\"Type\":2,\"Data\":\"rK4MoZl6rG1FhD3BarceXqNTQ7R0v9ksMCAoAq1kJAjDm87gNfK+ZsX1j0WOwQr9B9bEOdXrXGqeRB6hw64ysB16GJ/kwcZIEcPyRPcCHecY8hP/YNdiwd4GdQK+3pAx\"},\"Timestamp\":1691568750,\"BlockSig\":{\"Type\":2,\"Data\":\"iVW33wuNRlG+vDsZrbU06IaxgQZnbfcfr1H07J3yPzVR1iDipemQnJvguZHhU0MsGaE+Ao8P3gnpIlAwT3rCU9fcmhWu9ZKa4VBdNATfp0XekyLhurf0u4s8zr8J9aPg\"},\"ForkSignaling\":0,\"ParentBaseFee\":\"24545582\"}",
  "blockHash": "bafy2bzaced2mppl2pnwthgjnpoyquvb5wcvjxnz23pi62figaf5neqsmp4sea",
  "blockNumber": "3108745",
  "hash": "bafy2bzacecdw3kec2vuyw3iyaswx3bjgcfaog65vjs575sdjv4x2uucjqqquw",
  "receipt": "{\"id\":1691572949204249000,\"blockHash\":\"bafy2bzaceaniawxpe47kt5v46t6lussw4mkum2kowrweov4fqysl53a4ph3pk\",\"logsBloom\":\"0xfeffffefef4ffffffdcffffbfdddebbffffff7fefffdf6fbfdfeffeafffffffdbfffbfefffffffbff7fffdebfeeeefffffefffdff7ffffdeeffff7ffbff7fffd7ffffffffbafbff7ffffffffffffffffffffffffbf6ffbbfffff7fffb7ffffffffdfffffffffffffffff7f7ffffffdfff7fff7ffeffffdfefffbefffefffffffffffe7bfffdffd7fff7ffffffeffdff7fdffffdffffffffbd73fffffefbffffffeffffffffffff7bfffffffffffffbfbfffffeefffffffeffdffffffff6ffffffefedfffefffef3ff7ff7ffefffffbfffbff7fafdeffffbdfffffffffff7fdffffffbffefffffdfffff77ffffffffffdfffffff9ffffbbffffffffffffffffff\",\"contractAddress\":\"\",\"transactionIndex\":\"0xcb\",\"type\":\"0x2\",\"transactionHash\":\"bafy2bzacecdw3kec2vuyw3iyaswx3bjgcfaog65vjs575sdjv4x2uucjqqquw\",\"gasUsed\":\"0x3db1324\",\"blockNumber\":\"3108745\",\"cumulativeGasUsed\":\"0x0\",\"from\":\"f01968293\",\"to\":\"f01968296\",\"effectiveGasPrice\":\"0x2334e4e\",\"logs\":[],\"createTime\":\"2023-08-09\",\"status\":\"0x1\"}",
  "tx": "{\"Version\":0,\"To\":\"f01968296\",\"From\":\"f3w63zkcy7257tcf7pxak5dw3fokhirneqwucaohgwptsk2tc53dzwvfomb6qz3yubiympd4jw7pyort3kfirq\",\"Nonce\":41812,\"Value\":\"1978218677305279646\",\"GasLimit\":106241777,\"GasFeeCap\":\"5000000000\",\"GasPremium\":\"1345343\",\"Method\":7,\"Params\":\"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\u003d\u003d\",\"CID\":{\"/\":\"bafy2bzacecdw3kec2vuyw3iyaswx3bjgcfaog65vjs575sdjv4x2uucjqqquw\"}}"
}
  `

	r := CheckAddress([]byte(value), nil, store.PolygonTopic)

	if !r {
		t.Error("fail")
	} else {
		t.Log("ok")
	}

}
